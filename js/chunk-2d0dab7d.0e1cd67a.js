(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dab7d"],{"6d92":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{attrs:{bordered:!1}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleInline,"label-width":80}},[a("FormItem",{attrs:{prop:"title",label:"文章标题"}},[a("Input",{attrs:{type:"text",placeholder:"文章标题",clearable:""},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1),a("Row",{attrs:{gutter:16,type:"flex",justify:"start"}},[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{prop:"description",label:"文章简介"}},[a("Input",{attrs:{type:"text",placeholder:"请输入文章简介，最多120个字符",clearable:""},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description",e)},expression:"formValidate.description"}})],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"标签类型"}},[a("Select",{attrs:{multiple:"",filterable:"","max-tag-count":4,placeholder:"Select your labelType"},model:{value:t.formValidate.labelType,callback:function(e){t.$set(t.formValidate,"labelType",e)},expression:"formValidate.labelType"}},[a("Option",{attrs:{value:"0"}},[t._v("穿衣搭配")]),a("Option",{attrs:{value:"1"}},[t._v("冷读解读")]),a("Option",{attrs:{value:"2"}},[t._v("废物应对")]),a("Option",{attrs:{value:"3"}},[t._v("化解抵抗")]),a("Option",{attrs:{value:"4"}},[t._v("邀约约会")])],1)],1)],1)],1),a("Row",{attrs:{gutter:16,type:"flex",justify:"start"}},[a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{prop:"keywords",label:"关键词"}},[a("Input",{attrs:{type:"text",placeholder:"请输入关键词，最多50个字符，多个用英文分号隔开",clearable:""},model:{value:t.formValidate.keywords,callback:function(e){t.$set(t.formValidate,"keywords",e)},expression:"formValidate.keywords"}})],1)],1),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"文章分类"}},[a("Select",{attrs:{placeholder:"Select your articleClassificationValue"},model:{value:t.formValidate.articleClassificationValue,callback:function(e){t.$set(t.formValidate,"articleClassificationValue",e)},expression:"formValidate.articleClassificationValue"}},[a("Option",{attrs:{value:"0"}},[t._v("聊天教学")]),a("Option",{attrs:{value:"1"}},[t._v("恋爱分析")]),a("Option",{attrs:{value:"2"}},[t._v("网聊技巧")]),a("Option",{attrs:{value:"3"}},[t._v("形象提升")]),a("Option",{attrs:{value:"4"}},[t._v("出轨外遇")]),a("Option",{attrs:{value:"5"}},[t._v("分手挽回")])],1)],1)],1),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"消费金币"}},[a("InputNumber",{attrs:{type:"text",placeholder:"Enter freight",min:0},model:{value:t.formValidate.needCoin,callback:function(e){t.$set(t.formValidate,"needCoin",e)},expression:"formValidate.needCoin"}}),a("Poptip",{attrs:{trigger:"hover",title:"提示",content:"0代表免费"}},[a("Icon",{staticClass:"font-16 mgl10",attrs:{type:"md-help-circle"}})],1)],1)],1),a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"状态"}},[a("Select",{attrs:{placeholder:"Select your state"},model:{value:t.formValidate.state,callback:function(e){t.$set(t.formValidate,"state",e)},expression:"formValidate.state"}},[a("Option",{attrs:{value:"2"}},[t._v("发布")]),a("Option",{attrs:{value:"0"}},[t._v("草稿")]),a("Option",{attrs:{value:"1"}},[t._v("待审核")]),a("Option",{attrs:{value:"3"}},[t._v("删除")])],1)],1)],1)],1),a("Row",{attrs:{gutter:16,type:"flex",justify:"start"}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{prop:"avatar",label:"标题图片"}},[a("Avatar",{attrs:{src:t.formValidate.avatar,size:"large"}}),a("Button",{staticClass:"mgl10",attrs:{type:"primary",size:"small"},on:{click:function(e){t.cropperModal=!0}}},[t._v("选择图片")]),a("span",{staticClass:"mgl10"},[t._v("图片规格(px)： 204*140,上传图片不能超过200KB。")])],1)],1),a("Col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"展示类型"}},[a("Select",{attrs:{placeholder:"Select your showType"},model:{value:t.formValidate.showType,callback:function(e){t.$set(t.formValidate,"showType",e)},expression:"formValidate.showType"}},[a("Option",{attrs:{value:"0"}},[t._v("单张小图")]),a("Option",{attrs:{value:"1"}},[t._v("单张大图")]),a("Option",{attrs:{value:"2"}},[t._v("3张小图")])],1)],1)],1),a("Col",{attrs:{span:"8"}},[a("Button",{staticClass:"mgr10",attrs:{type:"default"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("重置表单")]),a("Button",{staticClass:"mgr10",attrs:{type:"primary"},on:{click:t.clearRichText}},[t._v("清空文本")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v(t._s(t.isCreate?"新建文章":"修改文章"))])],1)],1)],1),a("Editor",{ref:"editor",attrs:{value:t.currentArticleContents},on:{"on-change":t.handleChangeEditor}})],1),a("Modal",{attrs:{title:"标题图片","class-name":"vertical-center-modal",width:"620","mask-closable":!1},model:{value:t.cropperModal,callback:function(e){t.cropperModal=e},expression:"cropperModal"}},[a("Cropper")],1),a("Modal",{attrs:{width:"360","cancel-text":"新建文章","ok-text":"继续编辑"},on:{"on-cancel":function(e){return t.onCancel("formValidate")},"on-ok":function(e){t.isCreate=!1}},model:{value:t.tipsModal,callback:function(e){t.tipsModal=e},expression:"tipsModal"}},[a("p",{staticClass:"tcenter font-20",attrs:{slot:"header"},slot:"header"},[a("Icon",{staticClass:"green-color font-20 mgr5",attrs:{type:"ios-checkmark-circle"}}),a("span",[t._v(t._s(t.tips))])],1),a("div",{staticClass:"tcenter font-14"},[a("p",[t._v("是否继续编辑")])])])],1)},l=[],i=(a("7f7f"),a("ac6a"),a("a0f0")),o=a("9ffe"),s={name:"writeArticle",components:{Editor:i["a"],Cropper:o["a"]},data:function(){return{isCreate:!0,articleId:"",articleContentHtml:"",currentArticleContents:"",cropperModal:!1,tipsModal:!1,tips:"",formValidate:{title:"",description:"",avatar:"https://file.iviewui.com/dist/a0e88e83800f138b94d2414621bd9704.png",articleClassificationValue:"0",needCoin:0,labelType:[],showType:"0",state:"2",keywords:"keywords"},ruleInline:{title:[{required:!0,message:"Please fill in the title",trigger:"blur"}],description:[{required:!0,message:"Please fill in the description",trigger:"blur"}],keywords:[{required:!0,message:"Please fill in the keywords",trigger:"blur"}],avatar:[{required:!0,message:"Please fill in the avatar",trigger:"change"}]}}},mounted:function(){this.$refs.editor.setHtml("<p></p>");var t=this.$route.query;t.id&&(this.isCreate=!1,this.articleId=t.id,this.getArticleDetailById(this.articleId))},methods:{getArticleDetailById:function(t){var e=this,a="/1/1?id="+t;this.instance.getArticle(a).then(function(t){if(200===t.status&&0!==t.data.datas.length){var a=t.data.datas[0];e.formValidate.title=a.title,e.formValidate.description=a.description,e.currentArticleContents=a.content,e.$refs.editor.setHtml(a.content)}}).catch(function(t){console.log(t)})},handleDelete:function(t){this.tableData=this.tableData.filter(function(e,a){return a!==t.row.initRowIndex})},handleBatchArticleDeletion:function(t){var e=this;t.forEach(function(t,a){e.tableData=e.tableData.filter(function(e,a){return a!==t.initRowIndex})}),e.$Message.success("删除成功!")},handleChangeEditor:function(t){this.currentArticleContents=t},handleSubmit:function(t){var e=this;e.$refs[t].validate(function(a){if(a){var r={articleName:"name",title:e.formValidate.title,content:e.currentArticleContents,status:2,type:0,forwardOriginal:"01",description:e.formValidate.description,creator:"FLMheart"},l="create";e.tips="创建成功",e.isCreate||(l="update",e.tips="修改成功",r.id=e.articleId),e.createOrUpdateArticle(t,l,r)}})},onCancel:function(t){this.isCreate=!0,this.handleReset(t)},handleReset:function(t){this.$refs.editor.setHtml("<p></p>"),this.$refs[t].resetFields()},clearRichText:function(){var t=this;t.$Modal.confirm({title:"提示",content:"<p>清空后不可还原，是否清空</p>",onOk:function(){t.$refs.editor.setHtml("<p></p>")},onCancel:function(){}})},createOrUpdateArticle:function(t,e,a){var r=this;r.instance.createOrUpdateArticle(e,a).then(function(t){200===t.status&&200===t.data.code?(r.isCreate&&(r.articleId=t.data.results.id),r.tipsModal=!0):r.$Message.error(t.data.message)}).catch(function(t){console.log(t)})}}},n=s,c=a("2877"),d=Object(c["a"])(n,r,l,!1,null,"f9576626",null);e["default"]=d.exports}}]);