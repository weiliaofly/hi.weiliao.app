(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d9aa4b4"],{"5d45":function(e,a,t){},7513:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("Card",[t("tables",{ref:"tables",attrs:{editable:"",searchable:"",searchInputAble:"",columns:e.columns,showAddBtn:!0,showBatchDeletionBtn:!0,showBatchForbiddBtn:!0,showImportExcelBtn:!0,showExportExcelBtn:!0},on:{"on-detail":e.handleDetail,"on-add":e.handleAdd,"on-edit":e.handleEdit,"on-delete":e.handleDelete,"on-changeCoin":e.handleChangeCoin,"on-rechargeRecord":e.handleRechargeRecord,"on-batch-deletion":e.handleBatchDeletion},model:{value:e.tableData,callback:function(a){e.tableData=a},expression:"tableData"}})],1),t("Modal",{attrs:{title:"用户详情",width:"980","class-name":"vertical-center-modal"},model:{value:e.userDetailModal,callback:function(a){e.userDetailModal=a},expression:"userDetailModal"}},[t("Form",{attrs:{"label-width":80}},[t("Row",{attrs:{gutter:16,type:"flex",justify:"start"}},[t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"编号："}},[t("span",[e._v(e._s(e.tableDetailDataObj.accountNumber))])])],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"昵称："}},[t("span",[e._v(e._s(e.tableDetailDataObj.nickName))])])],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"头像："}},[t("Avatar",{attrs:{src:e.tableDetailDataObj.avatar}})],1)],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"背景："}},[t("Avatar",{attrs:{src:e.tableDetailDataObj.userBgImg}})],1)],1)],1),t("Row",{attrs:{gutter:16,type:"flex",justify:"start"}},[t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:"个性签名："}},[t("span",[e._v(e._s(e.tableDetailDataObj.autograph))])])],1)],1),t("Row",{attrs:{gutter:16,type:"flex",justify:"start"}},[t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"剩余金币："}},[t("span",[e._v(e._s(e.tableDetailDataObj.residualCoin))])])],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"电话："}},[t("span",[e._v(e._s(e.tableDetailDataObj.phone))])])],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"性别："}},[t("span",[e._v(e._s("0"===e.tableDetailDataObj.sex?"男":"女"))])])],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"状态："}},[t("span",[e._v(e._s("0"===e.tableDetailDataObj.state?"正常":"禁用"))])])],1)],1),t("Row",{attrs:{gutter:16,type:"flex",justify:"start"}},[t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"注册时间："}},[t("span",[e._v(e._s(e.tableDetailDataObj.createTime))])])],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"邀请码："}},[t("span",[e._v(e._s(e.tableDetailDataObj.invitationCode))])])],1),t("Col",{attrs:{span:"6"}},[t("FormItem",{attrs:{label:"是否实名："}},[t("span",[e._v(e._s("0"===e.tableDetailDataObj.isCertificated?"是":"否"))])])],1)],1)],1)],1),t("Modal",{attrs:{title:e.userFormModalTitle+"（新增是添加虚拟用户，修改则是重置违法的用户信息）","class-name":"vertical-center-modal","footer-hide":"","mask-closable":!1},on:{"on-cancel":e.cancelUserFormModal},model:{value:e.addOrUpdateUserFormModal,callback:function(a){e.addOrUpdateUserFormModal=a},expression:"addOrUpdateUserFormModal"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[t("div",{staticClass:"flex-center avatar-form-item"},[t("Col",{staticClass:"text-align-center",attrs:{span:"11"}},[t("div",{staticClass:"flex-center mgb10"},[t("Avatar",{attrs:{src:e.formValidate.avatar,size:"large"}})],1),t("div",{staticClass:"flex-center"},[t("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleResetUserInfo("img")}}},[e._v("重置头像")])],1)]),t("Col",{staticClass:"text-align-center",attrs:{span:"11"}},[t("div",{staticClass:"flex-center mgb10"},[t("Avatar",{attrs:{src:e.formValidate.userBgImg,size:"large"}})],1),t("div",{staticClass:"flex-center"},[t("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleResetUserInfo("img")}}},[e._v("重置背景图")])],1)])],1),t("FormItem",{attrs:{label:"昵称",prop:"nickName"}},[t("Input",{staticClass:"form-input mgr10",attrs:{placeholder:"Enter your nickName",clearable:""},model:{value:e.formValidate.nickName,callback:function(a){e.$set(e.formValidate,"nickName",a)},expression:"formValidate.nickName"}}),t("Button",{on:{click:function(a){return e.handleResetUserInfo("nickName")}}},[e._v("重置")])],1),t("FormItem",{attrs:{label:"个性签名",prop:"autograph"}},[t("Input",{staticClass:"form-input mgr10",attrs:{placeholder:"Enter your autograph",clearable:""},model:{value:e.formValidate.autograph,callback:function(a){e.$set(e.formValidate,"autograph",a)},expression:"formValidate.autograph"}}),t("Button",{on:{click:function(a){return e.handleResetUserInfo("autograph")}}},[e._v("重置")])],1),t("FormItem",{attrs:{label:"状态",prop:"state"}},[t("RadioGroup",{model:{value:e.formValidate.state,callback:function(a){e.$set(e.formValidate,"state",a)},expression:"formValidate.state"}},[t("Radio",{attrs:{label:"0"}},[e._v("正常")]),t("Radio",{attrs:{label:"1"}},[e._v("禁用")])],1)],1),1==e.formValidate.state?t("FormItem",{attrs:{label:"禁用时间",prop:"forbbidTime"}},[t("Select",{model:{value:e.formValidate.forbbidTime,callback:function(a){e.$set(e.formValidate,"forbbidTime",a)},expression:"formValidate.forbbidTime"}},[t("Option",{attrs:{value:"3"}},[e._v("3天")]),t("Option",{attrs:{value:"30"}},[e._v("30天")]),t("Option",{attrs:{value:"forever"}},[e._v("永久")])],1)],1):e._e(),t("div",{staticClass:"flex-center"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmit("formValidate")}}},[e._v("提交")])],1)],1)],1),t("Modal",{attrs:{title:"变更用户金币","class-name":"vertical-center-modal","footer-hide":"","mask-closable":!1},on:{"on-cancel":e.cancelUserFormModal},model:{value:e.changeCoinModal,callback:function(a){e.changeCoinModal=a},expression:"changeCoinModal"}},[t("Form",{ref:"coinFormValidate",attrs:{model:e.coinFormValidate,"label-width":100}},[t("FormItem",{attrs:{label:"用户昵称：",prop:"nickName"}},[e._v("\n        "+e._s(e.coinFormValidate.nickName)+"\n      ")]),t("FormItem",{attrs:{label:"当前金币：",prop:"currentCoin"}},[e._v("\n        "+e._s(e.coinFormValidate.currentCoin)+"\n      ")]),t("FormItem",{attrs:{label:"变更数值：",prop:"changeCoinNum"}},[t("InputNumber",{model:{value:e.coinFormValidate.changeCoinNum,callback:function(a){e.$set(e.coinFormValidate,"changeCoinNum",a)},expression:"coinFormValidate.changeCoinNum"}})],1),t("FormItem",{attrs:{label:"变更后总金币："}},[e._v("\n        "+e._s(e.totalCoin)+"\n      ")]),t("FormItem",{attrs:{label:"变更理由：",prop:"changeCoinNumReason"}},[t("Select",{attrs:{placeholder:"Select your department"},model:{value:e.coinFormValidate.changeCoinNumReason,callback:function(a){e.$set(e.coinFormValidate,"changeCoinNumReason",a)},expression:"coinFormValidate.changeCoinNumReason"}},[t("Option",{attrs:{value:"0"}},[e._v("系统赠送")]),t("Option",{attrs:{value:"1"}},[e._v("活动奖励")]),t("Option",{attrs:{value:"2"}},[e._v("充值失败")]),t("Option",{attrs:{value:"4"}},[e._v("系统出错")]),t("Option",{attrs:{value:"5"}},[e._v("其他")])],1)],1),t("FormItem",{attrs:{label:"备注：",prop:"changeCoinNumRemark"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"Enter something...",clearable:""},model:{value:e.coinFormValidate.changeCoinNumRemark,callback:function(a){e.$set(e.coinFormValidate,"changeCoinNumRemark",a)},expression:"coinFormValidate.changeCoinNumRemark"}})],1),t("div",{staticClass:"flex-center"},[t("Button",{attrs:{type:"primary"},on:{click:function(a){return e.handleSubmit("coinFormValidate")}}},[e._v("提交")])],1)],1)],1),t("Modal",{attrs:{title:e.rechargeRecordTitle,"footer-hide":"","class-name":"vertical-center-modal",width:"980"},model:{value:e.rechargeRecordModal,callback:function(a){e.rechargeRecordModal=a},expression:"rechargeRecordModal"}},[t("Card",[t("tables",{ref:"tables",attrs:{searchable:"",searchDataRangeAble:"",height:360,columns:e.rechargeRecordTableColumns},model:{value:e.rechargeRecordTableData,callback:function(a){e.rechargeRecordTableData=a},expression:"rechargeRecordTableData"}})],1)],1),t("Modal",{attrs:{title:e.breakRulesRecordTitle,"footer-hide":"","class-name":"vertical-center-modal",width:"980"},model:{value:e.breakRulesRecordModal,callback:function(a){e.breakRulesRecordModal=a},expression:"breakRulesRecordModal"}},[t("Card",[t("tables",{ref:"tables",attrs:{columns:e.breakRulesListTableColumns},model:{value:e.breakRulesListTableData,callback:function(a){e.breakRulesListTableData=a},expression:"breakRulesListTableData"}})],1)],1),t("Modal",{attrs:{title:"点击图片预览","class-name":"vertical-center-modal",width:"620"},model:{value:e.picturePreviewModal,callback:function(a){e.picturePreviewModal=a},expression:"picturePreviewModal"}},[t("viewer",{staticClass:"flex-center",attrs:{images:e.previewPictureData}},e._l(e.previewPictureData,function(e){return t("div",{key:e.img,staticClass:"detailed"},[t("img",{staticClass:"preview-picture",attrs:{src:e.img,alt:""}})])}),0)],1)],1)},l=[],o=(t("7f7f"),t("ac6a"),t("fa69")),i=t("7e1e"),n={name:"platform_user",components:{Tables:o["a"]},data:function(){var e=this;return{columns:[{title:"选项",type:"selection",width:45,key:"selection"},{title:"序号",type:"index",key:"index",width:80,align:"center"},{title:"电话",key:"phone"},{title:"账号",key:"accountNumber"},{title:"昵称",key:"nickName"},{title:"头像",key:"avatar",width:80,align:"center",render:function(a,t){return a("div",[a("img",{attrs:{src:t.row.avatar},class:"table-img",on:{click:function(){e.picturePreviewModal=!0}}})])}},{title:"背景图",key:"userBgImg",width:80,align:"center",render:function(a,t){return a("div",[a("img",{attrs:{src:t.row.userBgImg},class:"table-img",on:{click:function(){e.picturePreviewModal=!0}}})])}},{title:"性别",key:"sex",width:90,align:"center",render:function(e,a){var t="0"===a.row.sex?"blue":"red",r="0"===a.row.sex?"男":"女";return e("Tag",{props:{color:t}},r)}},{title:"个性签名",key:"autograph"},{title:"剩余金币",key:"residualCoin"},{title:"是否实名",key:"isCertificated",width:90,align:"center",render:function(e,a){var t="0"===a.row.isCertificated?"green":"gray",r="0"===a.row.isCertificated?"是":"否";return e("Tag",{props:{color:t}},r)}},{title:"开通橱窗",key:"isOpenShowcase",width:90,align:"center",render:function(e,a){var t="0"===a.row.isOpenShowcase?"green":"gray",r="0"===a.row.isOpenShowcase?"是":"否";return e("Tag",{props:{color:t}},r)}},{title:"违规次数",key:"breakRulesTimes",width:90,align:"center",render:function(a,t){return a("span",{class:t.row.breakRulesTimes>0?"a-href":"",on:{click:function(){t.row.breakRulesTimes>0&&(e.breakRulesRecordTitle=t.row.nickName+"的违规记录",e.breakRulesRecordModal=!0)}}},t.row.breakRulesTimes)}},{title:"状态",key:"state",width:80,align:"center",render:function(e,a){var t="0"===a.row.state?"success":"error",r="0"===a.row.state?"正常":"禁用";return e("Tag",{props:{color:t,title:r}},r)}},{title:"操作",key:"handle",align:"left",width:120,options:["detail","edit","delete","changeCoin","rechargeRecord"]}],rechargeRecordTableColumns:[{title:"序号",type:"index",key:"index",width:80,align:"center"},{title:"订单号",key:"orderNo"},{title:"金额（元）",key:"amount",render:function(e,a){return e("span",{style:{color:"red"}},a.row.amount)}},{title:"充值时间",key:"createTime",sortable:!0},{title:"充值类型",key:"rechargeTypeName"},{title:"状态",key:"state",render:function(e,a){var t="0"===a.row.state?"success":"error",r="0"===a.row.state?"已支付":"1"===a.row.state?"待支付":"失败";return e("Tag",{props:{color:t}},r)}}],breakRulesListTableColumns:[{title:"违规内容",key:"contents"},{title:"投诉链接",key:"compaintsId",width:90,align:"center"},{title:"处罚结果",key:"result",width:90,align:"center"},{title:"违规备注",key:"remarks"},{title:"处理人",key:"dealUser",width:90,align:"center"},{title:"处理时间",key:"dealTime",width:100,align:"center"},{title:"状态",key:"state",width:100,align:"center",render:function(e,a){var t=0===a.row.state?"success":"error",r=0===a.row.state?"已结束":"执行中";return e("Tag",{props:{color:t}},r)}}],tableData:[],rechargeRecordTableData:[],breakRulesListTableData:[],tableDetailDataObj:{},userFormModalTitle:"新增平台用户",rechargeRecordTitle:"",breakRulesRecordTitle:"",userDetailModal:!1,addOrUpdateUserFormModal:!1,picturePreviewModal:!1,changeCoinModal:!1,rechargeRecordModal:!1,breakRulesRecordModal:!1,formValidate:{avatar:"https://i.loli.net/2017/08/21/599a521472424.jpg",userBgImg:"https://i.loli.net/2017/08/21/599a521472424.jpg",nickName:"",autograph:"",state:"0",forbbidTime:"3"},coinFormValidate:{nickName:"",currentCoin:60,changeCoinNum:0,changeCoinNumReason:"0",changeCoinNumRemark:""},previewPictureData:[{img:"https://i.loli.net/2017/08/21/599a521472424.jpg"}],ruleValidate:{nickName:[{required:!0,message:"昵称不能为空",trigger:"blur"}]},searchCondition:{phone:"",pageIndex:1,pageSize:10}}},computed:{totalCoin:function(){return this.coinFormValidate.currentCoin+this.coinFormValidate.changeCoinNum}},mounted:function(){var e=this;this.getUsermanage(),Object(i["s"])().then(function(a){e.rechargeRecordTableData=a.data}),Object(i["d"])().then(function(a){e.breakRulesListTableData=a.data})},methods:{getUsermanage:function(){var e=this,a="?page_no="+this.searchCondition.pageIndex+"&page_size="+this.searchCondition.pageSize;this.instance.getUsermanage(a).then(function(a){200===a.status&&200===a.data.code&&(e.tableData=[],e.tableData=a.data.data.list)}).catch(function(e){console.log(e)})},handleDetail:function(e){this.userDetailModal=!0,this.tableDetailDataObj={},this.tableDetailDataObj=this.tableData[e.index]},handleAdd:function(){this.userFormModalTitle="新增平台用户",this.addOrUpdateUserFormModal=!0},handleEdit:function(e){this.userFormModalTitle="修改平台用户",this.formValidate.nickName=e.row.nickName,this.formValidate.avatar=e.row.avatar,this.formValidate.userBgImg=e.row.userBgImg,this.formValidate.autograph=e.row.autograph,this.formValidate.state=e.row.state,this.addOrUpdateUserFormModal=!0},handleDelete:function(e){this.deleteUserByPhone(e.row.phone)},handleBatchDeletion:function(e){var a=this;e.forEach(function(e,t){a.tableData=a.tableData.filter(function(a,t){return t!==e.initRowIndex})}),a.$Message.success("删除成功!")},handleChangeCoin:function(e){this.coinFormValidate.nickName=e.row.nickName,this.changeCoinModal=!0},handleRechargeRecord:function(e){this.rechargeRecordTitle=e.row.nickName+"的充值记录",this.rechargeRecordModal=!0},handleSubmit:function(e){var a=this,t=this;t.$refs[e].validate(function(r){if(r){if(a.totalCoin<0)return void t.$Message.error("用户金币不能少于0!");t.addOrUpdateUserFormModal=!1,t.changeCoinModal=!1,a.$refs[e].resetFields(),t.$Message.success("提交成功!")}else t.$Message.error("提交失败!")})},handleReset:function(e){this.$refs[e].resetFields()},handleResetUserInfo:function(e){"nickName"===e?this.formValidate.nickName="已重置":"autograph"===e?this.formValidate.autograph="已重置":this.$Modal.info({title:"重置用户信息",content:"图片重置为系统随机的图片，文字变成已重置"})},cancelUserFormModal:function(){this.handleReset("formValidate")},deleteUserByPhone:function(e){var a=this;a.instance.deleteUserByPhone(e).then(function(e){200===e.status&&200===e.data.code?(a.$Message.success("删除成功！"),a.getUsermanage()):a.$Modal.error({title:e.data.data,content:e.data.msg})}).catch(function(e){console.log(e)})}}},s=n,c=(t("ac58"),t("2877")),d=Object(c["a"])(s,r,l,!1,null,"6bee1401",null);a["default"]=d.exports},ac58:function(e,a,t){"use strict";var r=t("5d45"),l=t.n(r);l.a}}]);